<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--<dao namespace="UserSqlMap">-->
<mapper namespace="com.great.childschool.mapper.TjzBackMapper">



    <!-- 查询课程-->
    <select id="findClassRooms" parameterType="map" resultType="TjzTbClassRoom">
        SELECT cl.cname,wo.wname,cl.classroom,cl.courseadddate FROM tbl_classroom cl,tbl_worker wo
        WHERE cl.wid=wo.wid
            <if test="cName !=null and cName!=''">
                AND cl.cname like '%' #{cName} '%'
            </if>
            <if test="startDate !=null and startDate!=''">
                AND cl.courseadddate &gt;= #{startDate}
            </if>
            <if test="endDate !=null and endDate!=''">
                AND cl.courseadddate &lt;= #{endDate}
            </if>
        LIMIT #{pstart},#{psize}
    </select>

    <!--    查询课程数量-->
    <select id="findClassRoomNum" parameterType="map" resultType="int">
        SELECT count(cl.cid) FROM tbl_classroom cl,tbl_worker wo
        WHERE cl.wid=wo.wid
            <if test="cName !=null and cName!=''">
                AND cl.cname like '%' #{cName} '%'
            </if>
            <if test="startDate !=null and startDate!=''">
                AND cl.courseadddate &gt;= #{startDate}
            </if>
            <if test="endDate !=null and endDate!=''">
                AND cl.courseadddate &lt;= #{endDate}
            </if>
    </select>

<!--    &lt;!&ndash; 查询日志&ndash;&gt;-->
<!--    <select id="findLog" parameterType="map" resultType="com.great.springboot.bean.TbLog">-->
<!--        SELECT * FROM tb_log-->
<!--        <where>-->
<!--            <if test="userName !=null and userName!=''">-->
<!--                AND operator like '%' #{userName} '%'-->
<!--            </if>-->
<!--            <if test="startDate !=null and startDate!=''">-->
<!--                AND operationtime &gt;= #{startDate}-->
<!--            </if>-->
<!--            <if test="endDate !=null and endDate!=''">-->
<!--                AND operationtime &lt;= #{endDate}-->
<!--            </if>-->
<!--        </where>-->
<!--        LIMIT #{pstart},#{psize}-->
<!--    </select>-->

<!--    &lt;!&ndash;    查询日志数量&ndash;&gt;-->
<!--    <select id="findLogNum" parameterType="map" resultType="int">-->
<!--        SELECT COUNT(logid) FROM tb_log-->
<!--        <where>-->
<!--            <if test="userName !=null and userName!=''">-->
<!--                AND operator like '%' #{userName} '%'-->
<!--            </if>-->
<!--            <if test="startDate !=null and startDate!=''">-->
<!--                AND operationtime &gt;= #{startDate}-->
<!--            </if>-->
<!--            <if test="endDate !=null and endDate!=''">-->
<!--                AND operationtime &lt;= #{endDate}-->
<!--            </if>-->
<!--        </where>-->
<!--    </select>-->

<!--    &lt;!&ndash;    增加日志&ndash;&gt;-->
<!--    <insert id="addLog" parameterType="com.great.springboot.bean.TbLog">-->
<!--        INSERT INTO tb_log(operator,operationtime,operationalmatters)-->
<!--        VALUES (#{operator},#{operationTime},#{operationalMatters})-->
<!--    </insert>-->

<!--    &lt;!&ndash; 查询菜单&ndash;&gt;-->
<!--    <select id="findMenu" parameterType="int" resultType="com.great.springboot.bean.TbMenu">-->
<!--        SELECT p.menuid pmenuid,p.menuname pmenuname,c.menuid cmenuid,c.menuname cmenuname,c.menuurl-->
<!--        FROM tb_menu p,tb_menu c,tb_adro,tb_rome-->
<!--        WHERE p.menuid=c.pmenuid-->
<!--        AND tb_adro.adminid=#{personID}-->
<!--        AND tb_adro.roleid=tb_rome.roleid-->
<!--        AND tb_rome.menuid=p.menuid-->
<!--        AND tb_rome.menuchecked=1-->
<!--    </select>-->

<!--    &lt;!&ndash;    增加&ndash;&gt;-->
<!--    <insert id="addTbUser" parameterType="com.great.springboot.bean.TbUser">-->
<!--        INSERT INTO tb_user(username,userstate)-->
<!--        VALUES (#{userName},#{userState})-->
<!--    </insert>-->

<!--    &lt;!&ndash; 删除用户&ndash;&gt;-->
<!--    <delete id="deleteTbUserById">-->
<!--        DELETE FROM tb_user WHERE userid =#{userId}-->
<!--    </delete>-->

<!--    &lt;!&ndash;    文件上传&ndash;&gt;-->
<!--    <insert id="upload" parameterType="com.great.springboot.bean.TbDocument">-->
<!--        INSERT INTO tb_document(documentname,documentbrief,documentscore)-->
<!--        VALUES (#{documentName},#{documentBrief},#{documentScore})-->
<!--    </insert>-->

<!--    &lt;!&ndash; 修改用户&ndash;&gt;-->
<!--    <update id="updateUser" parameterType="com.great.springboot.bean.TbUser">-->
<!--        UPDATE tb_user-->
<!--        <set>-->
<!--            <if test="userName !=null and userName!=''">-->
<!--                username =#{userName},-->
<!--            </if>-->
<!--            <if test="userState !=null and userState!=''">-->
<!--                userstate = #{userState}-->
<!--            </if>-->
<!--        </set>-->
<!--        WHERE userid =#{userId}-->
<!--    </update>-->

<!--    &lt;!&ndash; 修改管理员  事务管理测试&ndash;&gt;-->
<!--    <update id="updateAdmin" parameterType="com.great.springboot.bean.TbAdmin">-->
<!--        UPDATE tb_admin-->
<!--        <set>-->
<!--            <if test="userName !=null and userName!=''">-->
<!--                username =#{userName},-->
<!--            </if>-->
<!--            <if test="userState !=null and userState!=''">-->
<!--                userstate = #{userState}-->
<!--            </if>-->
<!--        </set>-->
<!--        WHERE userid =#{userId}-->
<!--    </update>-->

</mapper>